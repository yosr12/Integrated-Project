{% extends 'base.html.twig' %}
{%block body%}
<!-- Page Content -->
    <div class="page-heading about-heading header-text" style="background-image: url(assets/images/avion.jpg);">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="text-content">
              <h2>Transports</h2>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br>
    <br>

    
          
      <div class="container">
        <div class="section-heading" style="border: 0">
          <h2>Disponibilité &amp; Prix</h2>
        </div>
       <div class="d-flex align-items-center"><input class="form-control" type="search" id="search" placeholder="Search by Type">
        <a  href="{{ path('search') }}"><i class="fa fa-sort"></i></a>
  </div>

        <div class="table-responsive">
          <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table">
               <thead>
                    <tr>
                         <th>Type de transport</th>
                         <th>Disponibilité</th>
                         <th>Prix</th>
                         <th>Description</th>
                    </tr>
               </thead>
               
               <tbody id="all">
                {% for transport in transports %}
                    <tr>
                         
                         <td><a href="{{ path('transportdetails', {'id': transport.id}) }}">{{transport.type}}</a></td>
                         <td><a href="{{ path('transportdetails', {'id': transport.id}) }}">{{transport.disponibilite}}</a></td>
                         <td>{{transport.price}}</td>
                         <td>{{transport.description}}</td>
                    </tr>

                    
                   
                    {% endfor %}
               </tbody>
              <tbody align="left" border="2" id="search">
        </tbody>
  </table>
          <a class="btn btn-success" href="{{path('pdf') }}">  PDF </a>

        </div>
      </div>
    <br>
    <br>
    <br>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary">Book Now</button>
          </div>
        </div>
      </div>
    </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $( document ).ready(function() {
            var currentRequest = null;
            $("#search").keyup(function(e){
                var value = $(this).val();
                if(currentRequest != null) {
                    currentRequest.abort();
                }
                currentRequest = $.ajax({
                    url : "{{ path('search') }}",
                    type : 'GET',
                    data: {
                        'searchValue' : value
                    },
                    success : function(retour)
                    {
                        $('#all').html(retour);
                    },
                });
                return false;
            });
        });
    </script>
    
{% endblock %}



